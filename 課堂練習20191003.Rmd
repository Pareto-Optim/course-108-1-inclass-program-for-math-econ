---
title: "課堂練習"
date: "9/12/2019"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(reticulate)
use_python("/Users/anthonywwetterer/anaconda3/envs/m-team/bin/python",
           required = T)
use_condaenv("m-team", required = T)
```



# dictionary

```{python}
dictionaryA={
  "日期": [2001,2002,2003],
  "金額": [21000,33000,45880]}
dictionaryA

dictionaryA["數量"]=[100,200,300] # 增加新的 key-value pair
dictionaryA
```

```{python}
dictionaryA["日期"] # 查詢
```



```{python}
dictionaryA.keys()
```


```{python}
import requests
response=requests.get("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=3")
danceInfo=response.json()
```

```{python}
type(danceInfo)
```

```{python}
type(danceInfo[1])
```

```{python}
danceInfo[1].keys()
```


```{python}
danceInfo[1].values()
```



```{python}
dictionaryA.keys()
dictionaryA.values()
dictionaryA.items()

#dictionaryA.keys()[0]
list(dictionaryA.keys())
list(dictionaryA.values())
```

```{python}
dictionaryA.keys()
list(dictionaryA.keys())[0]
```

```{python}
dictionaryA.items()
list(dictionaryA.items())
```

```{python}
list(dictionaryA)
```

```{python}
import pandas as pd

finStatement=pd.read_csv("http://mopsfin.twse.com.tw/opendata/t187ap06_O_ci.csv")
dict_finStatement=finStatement.to_dict()
```

```{r}
#library(dplyr)
View(py$dict_finStatement)
```

```{python}
dict_finStatement.keys()
```


```{python}
dict_finStatement.get( '營業利益（損失）').values()
dict_finStatement.get('公司名稱')
```

1. 找出損失的index
```{python}
profit=list(dict_finStatement.get( '營業利益（損失）').values())

lossFirmKeys=[index for index in range(len(profit)) if profit[index]<0]
```

2. 由index進去公司找出名稱
```{python}
index=lossFirmKeys[100]
dict_finStatement.get('公司名稱')[index]
dict_finStatement.get('公司名稱').get(index)

[dict_finStatement.get('公司名稱').get(index) for index in lossFirmKeys]
```

dictionary comprehension 呈現公司名稱：損失金額
```{python}
{dict_finStatement.get('公司名稱').get(index): list(dict_finStatement.get( '營業利益（損失）').values())[index] for index in lossFirmKeys}
```

```{python}
dict_finStatement.get( '營業利益（損失）').values()
```

```{python}
[dict_finStatement["公司名稱"][i]  
  for i in range(len(dict_finStatement["營業利益（損失）"] )) 
  if dict_finStatement["營業利益（損失）"][i] < 0]
```


# comprehension with condition

```{python}
listA=[10,2,7,3,8]

[listA[index] for index in range(len(listA)) if listA[index]>5]
[index for index in range(len(listA)) if listA[index]>5 ]
```

# Functions

```{python}
def myFun(x,y):
  z=x+y
  return z
  
myFun(5,6)
myFun(0,1)

def myFun2(x,y):
  return x+y

myFun2(5,6)
myFun2(0,1)
```

```{python}
def myFun3(x,y=6):
  return x+y
  
myFun3(x=5,y=6)
myFun3(5)
```

## packing/unpacking

```{python}
listA=(0,1,3)

a,b,c=listA # def  ...(a,b,c)
a
b
c

a,*b=listA # def ...(a,*b)
a
b
```

```{python}
# (0,alpha=1,beta=3)

# def ...(a,**b)
```

b=

```{python}
b={"alpha": 1, "beta": 3}
```

